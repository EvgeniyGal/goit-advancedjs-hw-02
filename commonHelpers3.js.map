{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\n\nform.addEventListener('submit', handlerFormSubmit);\n\nfunction handlerFormSubmit(ev) {\n  ev.preventDefault();\n\n  const formData = [...ev.target.elements]\n    .filter(el => el.nodeName === 'INPUT')\n    .reduce((acc, el) => {\n      if (el.name) {\n        acc[el.name] = Number.parseInt(el.value);\n      }\n      return acc;\n    }, {});\n\n  ev.target.reset();\n\n  for (let i = 1; i <= formData.amount; i++) {\n    createPromise(i, formData.delay)\n      .then(data => {\n        showMassage(data, true);\n      })\n      .catch(data => {\n        showMassage(data, false);\n      });\n\n    formData.delay += formData.step;\n  }\n}\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n\n  return new Promise((res, rej) => {\n    setTimeout(() => {\n      if (shouldResolve) {\n        res({ position, delay });\n      } else {\n        rej({ position, delay });\n      }\n    }, delay);\n  });\n}\n\nfunction showMassage({ position, delay }, isResolved) {\n  iziToast.info({\n    timeout: delay,\n    position: 'topRight',\n    icon: null,\n    title: isResolved ? '✅' : '❌',\n    color: isResolved ? 'green' : 'red',\n    message: `Rejected promise ${position} in ${delay}ms`,\n  });\n}\n"],"names":["form","handlerFormSubmit","ev","formData","el","acc","i","createPromise","data","showMassage","position","delay","shouldResolve","res","rej","isResolved","iziToast"],"mappings":"wIAGA,MAAMA,EAAO,SAAS,cAAc,OAAO,EAE3CA,EAAK,iBAAiB,SAAUC,CAAiB,EAEjD,SAASA,EAAkBC,EAAI,CAC7BA,EAAG,eAAc,EAEjB,MAAMC,EAAW,CAAC,GAAGD,EAAG,OAAO,QAAQ,EACpC,OAAOE,GAAMA,EAAG,WAAa,OAAO,EACpC,OAAO,CAACC,EAAKD,KACRA,EAAG,OACLC,EAAID,EAAG,MAAQ,OAAO,SAASA,EAAG,KAAK,GAElCC,GACN,CAAE,CAAA,EAEPH,EAAG,OAAO,QAEV,QAASI,EAAI,EAAGA,GAAKH,EAAS,OAAQG,IACpCC,EAAcD,EAAGH,EAAS,KAAK,EAC5B,KAAKK,GAAQ,CACZC,EAAYD,EAAM,EAAI,CAC9B,CAAO,EACA,MAAMA,GAAQ,CACbC,EAAYD,EAAM,EAAK,CAC/B,CAAO,EAEHL,EAAS,OAASA,EAAS,IAE/B,CAEA,SAASI,EAAcG,EAAUC,EAAO,CACtC,MAAMC,EAAgB,KAAK,OAAM,EAAK,GAEtC,OAAO,IAAI,QAAQ,CAACC,EAAKC,IAAQ,CAC/B,WAAW,IAAM,CACXF,EACFC,EAAI,CAAE,SAAAH,EAAU,MAAAC,CAAK,CAAE,EAEvBG,EAAI,CAAE,SAAAJ,EAAU,MAAAC,CAAK,CAAE,CAE1B,EAAEA,CAAK,CACZ,CAAG,CACH,CAEA,SAASF,EAAY,CAAE,SAAAC,EAAU,MAAAC,CAAK,EAAII,EAAY,CACpDC,EAAS,KAAK,CACZ,QAASL,EACT,SAAU,WACV,KAAM,KACN,MAAOI,EAAa,IAAM,IAC1B,MAAOA,EAAa,QAAU,MAC9B,QAAS,oBAAoBL,QAAeC,KAChD,CAAG,CACH"}