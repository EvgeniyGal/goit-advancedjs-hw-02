{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\n\nform.addEventListener('submit', handlerFormSubmit);\n\nfunction handlerFormSubmit(ev) {\n  ev.preventDefault();\n\n  const formData = [...ev.target.elements]\n    .filter(el => el.nodeName === 'INPUT')\n    .reduce((acc, el) => {\n      if (el.name) {\n        acc[el.name] = Number.parseInt(el.value);\n      }\n      return acc;\n    }, {});\n\n  ev.target.reset();\n\n  for (let i = 1; i <= formData.amount; i++) {\n    createPromise(i, formData.delay)\n      .then(({ position, delay }) => {\n        iziToast.info({\n          timeout: delay,\n          position: 'topRight',\n          icon: null,\n          title: '✅',\n          color: 'green',\n          message: `Fulfilled promise ${position} in ${delay}ms`,\n        });\n      })\n      .catch(({ position, delay }) => {\n        iziToast.info({\n          timeout: delay,\n          position: 'topRight',\n          icon: null,\n          title: '❌',\n          color: 'red',\n          message: `Rejected promise ${position} in ${delay}ms`,\n        });\n      });\n\n    formData.delay += formData.step;\n  }\n}\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n\n  if (shouldResolve) {\n    return new Promise(res =>\n      setTimeout(() => res({ position, delay }), delay)\n    );\n  } else {\n    return new Promise((_, rej) =>\n      setTimeout(() => rej({ position, delay }), delay)\n    );\n  }\n}\n"],"names":["form","handlerFormSubmit","ev","formData","el","acc","i","createPromise","position","delay","iziToast","res","_","rej"],"mappings":"wIAGA,MAAMA,EAAO,SAAS,cAAc,OAAO,EAE3CA,EAAK,iBAAiB,SAAUC,CAAiB,EAEjD,SAASA,EAAkBC,EAAI,CAC7BA,EAAG,eAAc,EAEjB,MAAMC,EAAW,CAAC,GAAGD,EAAG,OAAO,QAAQ,EACpC,OAAOE,GAAMA,EAAG,WAAa,OAAO,EACpC,OAAO,CAACC,EAAKD,KACRA,EAAG,OACLC,EAAID,EAAG,MAAQ,OAAO,SAASA,EAAG,KAAK,GAElCC,GACN,CAAE,CAAA,EAEPH,EAAG,OAAO,QAEV,QAASI,EAAI,EAAGA,GAAKH,EAAS,OAAQG,IACpCC,EAAcD,EAAGH,EAAS,KAAK,EAC5B,KAAK,CAAC,CAAE,SAAAK,EAAU,MAAAC,KAAY,CAC7BC,EAAS,KAAK,CACZ,QAASD,EACT,SAAU,WACV,KAAM,KACN,MAAO,IACP,MAAO,QACP,QAAS,qBAAqBD,QAAeC,KACvD,CAAS,CACT,CAAO,EACA,MAAM,CAAC,CAAE,SAAAD,EAAU,MAAAC,KAAY,CAC9BC,EAAS,KAAK,CACZ,QAASD,EACT,SAAU,WACV,KAAM,KACN,MAAO,IACP,MAAO,MACP,QAAS,oBAAoBD,QAAeC,KACtD,CAAS,CACT,CAAO,EAEHN,EAAS,OAASA,EAAS,IAE/B,CAEA,SAASI,EAAcC,EAAUC,EAAO,CAGtC,OAFsB,KAAK,OAAM,EAAK,GAG7B,IAAI,QAAQE,GACjB,WAAW,IAAMA,EAAI,CAAE,SAAAH,EAAU,MAAAC,CAAK,CAAE,EAAGA,CAAK,CACtD,EAEW,IAAI,QAAQ,CAACG,EAAGC,IACrB,WAAW,IAAMA,EAAI,CAAE,SAAAL,EAAU,MAAAC,CAAK,CAAE,EAAGA,CAAK,CACtD,CAEA"}